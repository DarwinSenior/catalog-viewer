<link rel="import" href="../bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="../bower_components/paper-header-panel/paper-header-panel.html">
<link rel="import" href="../bower_components/paper-material/paper-material.html">
<link rel="import" href="../bower_components/paper-radio-group/paper-radio-group.html">
<link rel="import" href="../bower_components/paper-radio-button/paper-radio-button.html">
<link rel="import" href="../bower_components/paper-styles/paper-styles.html">

<link rel="import" href="./collapsable-item.html">
<!-- <link rel="import" href="./heatmap-picker/heatmap-picker.html"> -->
<link rel="import" href="./simple-data.html">
<dom-module id="map-controller">
  <style>
    :host {
      display: block;
      width: 100%;
      height: 100%;
      overflow-y: scroll;
      overflow-x: visible;
    }
    .header-title{
      font-size: 40px;
    }
    .heatmap-picker{
      margin: 5px;
    }
    .data-card{
      background-color: var(--paper-grey-100);
      margin: 10px;
    }
  </style>
  <template>
  <paper-header-panel>
    <paper-toolbar class="medium-tall">
      <paper-icon-button icon="arrow-back" on-tap="_return"></paper-icon-button>
      <div class="title bottom"><span class="header-title">[[title]]</span></div>
    </paper-toolbar>
    <collapsable-item title="Data Display">
      <paper-material class="data-card" elevation="1">
        <simple-data></simple-data>
      </paper-material>
    </collapsable-item>

    <collapsable-item title="Settings">
    </collapsable-item>

    <collapsable-item title="Colour Map Setting">
        <paper-radio-group selected="{{colorScheme.selected}}">
        <template is="dom-repeat" items="[[_getColorOptions(data)]]">
          <paper-radio-button class="green" name="[[item.color]]" disabled="[[!item.isNumber]]">[[item.color]]</paper-radio-button>
        </template>
        </paper-radio-group>
        <!-- <heatmap-picker 
          leftcolor="{{colorScheme.mincolor}}"
          rightcolor="{{colorScheme.maxcolor}}"></heatmap-picker> -->
    </collapsable-item>

  </paper-header-panel>
  </template>
</dom-module>
<script>
(function() {
  Polymer({
    is: 'map-controller',

    properties: {
      title : {
        type : String,
        value : "untitled",
        notify : true,
        reflectToAttribute : true
      },
      data : {
        type : Object
      },
      colorScheme : {
        type : Object,
        notify : true,
        value : {selected : "", max : 0, min : 0, maxcolor : 'red', mincolor : 'red'}
      }
    },
    ready : function(){
    },
    _return : function(){
      this.fire('page-map-return');
    },
    _getColorOptions : function(){
      var data = this.data;
      return (data.HEADER || []).map(function(item){
        return {
          color : item, 
          isNumber : (data[item].type=='INT' || data[item].type=="FLOAT")
        };
      });
    }
  });
})();
</script>